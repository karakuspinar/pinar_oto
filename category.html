<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kategori</title>

<style>
body{margin:0;font-family:Arial;background:#fff5f8;}

.topbar{
background:#ff2e88;color:#fff;padding:12px;text-align:center;font-weight:bold;
}

.grid{
max-width:1200px;
margin:40px auto;
display:grid;
grid-template-columns:repeat(3,1fr);
gap:30px;
}

.card{
background:#fff;
padding:15px;
border-radius:12px;
text-align:center;
box-shadow:0 0 10px rgba(0,0,0,0.1);
}

.card img{
width:100%;
height:180px;
object-fit:contain;
}
</style>
</head>

<body>

<div class="topbar">Pınar Oto Aksesuar</div>

<h2 style="text-align:center" id="title"></h2>

<div class="grid" id="grid"></div>

<script>
const params=new URLSearchParams(window.location.search);
const kategori=params.get("cat");
document.getElementById("title").innerText=kategori;

async function load(){
const res=await fetch("products.json");
const data=await res.json();

const brand=localStorage.getItem("carBrand");
const model=localStorage.getItem("carModel");
const year=localStorage.getItem("carYear");

let html="";

data.forEach(p=>{

// kategori kontrol
if(kategori && p.kategori!=kategori) return;

// araç filtre
if(brand && p.brand!=brand) return;
if(model && p.model!=model) return;
// YIL FİLTRE
if(year){
  if(!p.year) return;

  // yıl aralık mı?
  if(p.year.includes("-")){
    const parts = p.year.split("-");
    const start = parseInt(parts[0]);
    const end = parseInt(parts[1]);
    const secilen = parseInt(year);

    if(secilen < start || secilen > end) return;
  }
  else{
    if(p.year != year) return;
  }
}
html+=`
<div class="card">
<img src="${p.resim}">
<h3>${p.ad}</h3>
<p>${p.fiyat} TL</p>
</div>`;
});

if(html=="") html="<h3 style='text-align:center'>Ürün bulunamadı</h3>";

document.getElementById("grid").innerHTML=html;
}

load();
</script>

</body>
</html>